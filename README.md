# Экосистема 

__Я постарался воссоздать, сделать максимально качественно, но всё же есть ошибки, там есть и смерть от старости, и более-менее реалистичное размножение, смену дня и ночи (с этим было больше всего проблем)__

## Класс Entity

Этот класс `Entity` представляет собой базовый класс для всех сущностей в игре. Он содержит информацию о позиции, скорости, размере, здоровье, голоде, жажде, цвете и других параметрах сущности. 

Класс имеет следующие методы:

- `update`: Обновляет состояние сущности, включая голод, жажду, здоровье, возраст и другие параметры. Также обрабатывает поведение сущности в зависимости от времени суток и других факторов.
  
- `check_for_food_and_water`: Проверяет, есть ли у сущности цель (еда или вода) и если нет, то ищет ближайшую цель.
- `avoid_other_entities`: Обрабатывает избегание других сущностей.
- `avoid_edges`: Обрабатывает избегание границ карты.
- `avoid_water`: Обрабатывает избегание воды.
- `wander`: Обрабатывает случайное блуждание сущности по карте.
- `on_target_reached`: Обрабатывает достижение цели сущностью.
- `draw`: Рисует сущность на экране.
- `draw_info`: Рисует информацию о сущности на экране.
- `find_reproduction_target`: Ищет ближайшую подходящую для размножения сущность.
- `find_water_target`: Ищет ближайший источник воды.

## Класс Predator

Класс `Predator` наследуется от класса `Entity` и представляет собой класс для хищников в игре. Он содержит дополнительные свойства и методы, специфичные для хищников.

Основные методы класса `Predator` включают:

- `find_target`: Ищет ближайшую цель (травоядное) для хищника.
- `on_target_reached`: Обрабатывает достижение цели хищником.
- `update`: Обновляет состояние хищника, включая поиск цели, избегание других хищников, размножение и другие параметры.
- `patrol`: Обрабатывает патрулирование хищником.
- `attack`: Обрабатывает атаку хищника на травоядное.
- `try_eat`: Обрабатывает попытку хищника съесть травоядное или крест.
- `avoid_other_entities`: Обрабатывает избегание других хищников.
- `create_eating_cross`: Создает крест для хищника после атаки на травоядное.
- `check_reproduce`: Проверяет, готов ли хищник к размножению.
- `reproduce`: Обрабатывает размножение хищника с другим хищником.

Класс также содержит несколько свойств, таких как `attack_damage`, `growth_time`, `is_baby`, `time_to_reproduce`, `vision_range`, `hunt_range`, `target_search_interval`, `last_target_search`, `hunger_threshold_attack`, `eating_cross`, `chase_timer`, `max_chase_time`, `patrol_timer`, `patrol_interval`, `eat_timer`, `eat_interval`, `eating_crosses`, `is_eating_cross`, `has_eaten_cross`, `avoid_predator_timer`, `avoid_predator_duration`, `hunger_desperation_threshold` и другие, которые используются для управления поведением хищника.

## Класс EatingCross

Класс `EatingCross` представляет собой класс для крестов, которые создаются после атаки хищника на травоядное. Кресты служат для того, чтобы хищник мог продолжать питаться после убийства травоядного.

Основные методы класса `EatingCross` включают:

- `update`: Обновляет состояние креста, включая таймер существования креста.
- `draw`: Рисует крест на экране.

Класс также содержит несколько свойств, таких как `x`, `y`, `hunger`, `color`, `timer`, `max_timer` и другие, которые используются для управления поведением креста.

## Класс Herbivore

Класс `Herbivore` наследуется от класса `Entity` и представляет собой класс для травоядных в игре. Он содержит дополнительные свойства и методы, специфичные для травоядных.

Основные методы класса `Herbivore` включают:

- `find_target`: Ищет ближайшую цель (еда) для травоядного.
- `update`: Обновляет состояние травоядного, включая поиск цели, избегание границ карты, размножение и другие параметры.
- `on_target_reached`: Обрабатывает достижение цели травоядным.
- `check_reproduce`: Проверяет, готов ли травоядный к размножению.
- `reproduce`: Обрабатывает размножение травоядного с другим травоядным.

Класс также содержит несколько свойств, таких как `fear_distance`, `time_to_reproduce`, `target_eat_distance`, `target_drink_distance`, `fleeing_speed_multiplier`, `hunt_range` и другие, которые используются для управления поведением травоядного.

## Класс Resource

Класс `Resource` представляет собой класс для ресурсов в игре, таких как еда и вода. Он содержит информацию о позиции, размере и цвете ресурса.

Основные методы класса `Resource` включают:

- `draw`: Рисует ресурс на экране.

Класс также содержит несколько свойств, таких как `x`, `y`, `size`, `color` и другие, которые используются для управления поведением ресурса.

## Класс Food, Water

Классы `Food` и `Water` наследуются от класса `Resource` и представляют собой классы для еды и воды в игре соответственно. Они содержат дополнительные свойства и методы, специфичные для этих ресурсов.

Основные методы классов `Food` и `Water` включают:

- `__init__`: Конструктор класса, который инициализирует все параметры ресурса.

Классы также содержат несколько свойств, таких как `x`, `y`, `size`, `color` и другие, которые используются для управления поведением ресурса.

## Класс DayNightCycle

Класс `DayNightCycle` представляет собой класс для цикла дня и ночи в игре. Он содержит информацию о длительности дня, ночи и переходных периодов, а также текущее время цикла.

Основные методы класса `DayNightCycle` включают:

- `update`: Обновляет текущее время цикла.
- `get_time_progress`: Возвращает прогресс времени цикла.
- `is_day`: Проверяет, является ли текущее время днем.
- `get_background_color`: Возвращает цвет фона в зависимости от текущего времени цикла.

Класс также содержит несколько свойств, таких как `day_length`, `night_length`, `transition_duration`, `cycle_duration`, `timer` и другие, которые используются для управления поведением цикла дня и ночи.

## Класс Game

Класс `Game` представляет собой основной класс игры. Он содержит информацию о карте, сущностях, ресурсах, источниках воды, цикле дня и ночи, а также другие параметры игры.

Основные методы класса `Game` включают:

- `__init__`: Конструктор класса, который инициализирует все параметры игры.
- `init_entities`: Инициализирует сущности (травоядные и хищники) в игре.
- `init_resources`: Инициализирует ресурсы (еду) в игре.
- `init_water_sources`: Инициализирует источники воды в игре.
- `run`: Запускает основной цикл игры.
- `check_hover`: Проверяет, наведен ли курсор мыши на сущность.
- `update`: Обновляет состояние игры, включая обновление сущностей, ресурсов и других параметров.
- `draw`: Рисует игру на экране.

Класс также содержит несколько свойств, таких как `map`, `entities`, `resources`, `water_sources`, `clock`, `last_time`, `hovered_entity`, `day_night_cycle`, `eating_crosses` и другие, которые используются для управления поведением игры.

```python
if __name__ == '__main__':
    game = Game()
    game.run()
```

Код создает экземпляр класса `Game` и вызывает метод `run` этого экземпляра, который запускает основной цикл игры. 

Если скрипт запущен напрямую, то условие `if __name__ == '__main__'` будет истинным, и код внутри этого условия будет выполнен. Если скрипт импортирован как модуль в другой скрипт, то условие будет ложным, и код внутри этого условия не будет выполнен.

## Инструкция по запуску:

1.  **Клонирование репозитория:**
    Если вы ещё не клонировали репозиторий, используйте Git для клонирования на ваш локальную машину:
    ```
    git clone <ссылка_на_репозиторий>
    ```
    
Замените **<ссылка_на_репозиторий>** на фактическую ссылку на мой репозиторий.

2.  **Установка зависимостей:**
    Откройте терминал, перейдите в директорию проекта и установите необходимые библиотеки:
    ```
    pip install pygame
    ```
3.  **Запуск бота:**
    В терминале, находясь в директории проекта, запустите скрипт main.py:
    `python main.py`
    ```
    python3 main.py
    ```
